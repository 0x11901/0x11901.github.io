<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="0x11901的博客">
    <meta name="keyword"  content="0x11901">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Haskell在macOS下的环境搭建 - 0x11901的博客 | 0x11901&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Trust no one. Even your compiler. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>0x11901</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#准备工作"><span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发环境的搭建"><span class="toc-text">开发环境的搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#编译器-GHC-、解释器-GHCI-等Haskell工具链"><span class="toc-text">编译器(GHC)、解释器(GHCI)等Haskell工具链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑器"><span class="toc-text">编辑器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IDE"><span class="toc-text">IDE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HaskForce"><span class="toc-text">HaskForce</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#相关工具"><span class="toc-text">相关工具</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Trust no one. Even your compiler. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Haskell在macOS下的环境搭建
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2018-06-22 01:40:48</span></span>
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <p>Haskell作为一个冷门语言，并没有一个简单好用傻瓜式的IDE。所以笔者记录了自己搭建环境的过程，希望对大家有所帮助。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>一个好的网络环境，至少与GitHub保持通畅连接</li>
<li><a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a></li>
</ol>
<h2 id="开发环境的搭建"><a href="#开发环境的搭建" class="headerlink" title="开发环境的搭建"></a>开发环境的搭建</h2><h3 id="编译器-GHC-、解释器-GHCI-等Haskell工具链"><a href="#编译器-GHC-、解释器-GHCI-等Haskell工具链" class="headerlink" title="编译器(GHC)、解释器(GHCI)等Haskell工具链"></a>编译器(GHC)、解释器(GHCI)等Haskell工具链</h3><p>在笔者踩过无数坑之后，无脑推荐<a href="https://docs.haskellstack.org/en/stable/README/" target="_blank" rel="noopener">Haskell Stack</a>，喜欢挑战的读者可以自行尝试使用GHC+GHCI+<a href="https://www.haskell.org/cabal/" target="_blank" rel="noopener">Cabal</a>开发环境<br>    <code>brew install haskell-stack</code></p>
<h3 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h3><p>目前主流的编辑器有vim, emacs, sublime, atom, visual studio code等，笔者平日开发中只在修改配置文件或者替换某个字符串时用到它们故先按下不表。</p>
<h3 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h3><p>因为宇宙最强IDE——<a href="https://www.visualstudio.com/" target="_blank" rel="noopener">Visual Studio</a>在Mac上发力较晚并表现不佳，故笔者建议使用<a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener">IntelliJ IDEA</a>(虽说笔者非常讨厌Java这门语言，但是不得不承认Java写出来的工具还是有不少好用的)</p>
<h4 id="HaskForce"><a href="#HaskForce" class="headerlink" title="HaskForce"></a>HaskForce</h4><p>IntelliJ IDEA有两个第三方插件提供了对Haskell的支持，笔者建议使用评分较高的<a href="http://haskforce.com/" target="_blank" rel="noopener">HaskForce</a>，目前这款插件已经无人维护(存疑，但也侧面反映了Haskell社区的现状)</p>
<ul>
<li><p>安装</p>
<ol>
<li>在IntelliJ IDEA中按下 ⌘ + , 进入偏好设置界面</li>
<li><blockquote>
<p>Plugins &gt; Browse repositories &gt; HaskForce</p>
</blockquote>
</li>
</ol>
</li>
<li><p>使用<br>  由于 HaskForce 插件自身的局限性，需要在终端中通过 Haskell Stack 创建项目。</p>
<ol>
<li><code>stack new 项目名称 模版名称 路径(默认当前路径)</code></li>
<li><code>cd 项目名称</code></li>
<li><code>stack setup</code></li>
<li><code>stack build</code> </li>
</ol>
</li>
</ul>
<p><em>注意如果在创建项目中提示参数不足的警告，可以在~/.stack/config.yaml中配置</em></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">templates:</span></span><br><span class="line"><span class="attr">  params:</span></span><br><span class="line"><span class="attr">    author-name:</span> <span class="string">your-name</span></span><br><span class="line"><span class="attr">    author-email:</span> <span class="string">your-email</span></span><br><span class="line"><span class="attr">    copyright:</span> <span class="string">'Copyright (c) 2018 0x11901'</span></span><br><span class="line"><span class="attr">    github-username:</span> <span class="string">'0x11901'</span></span><br><span class="line"><span class="attr">    category:</span> <span class="string">categories</span></span><br></pre></td></tr></table></figure>
<p><em>不建议在此写死模版名称，如果不是很确定要用什么模版，可以在新建项目时传simple</em></p>
<ul>
<li><p>使用 IntelliJ IDEA 导入创建的 Haskell Stack 项目</p>
<ol>
<li>路径选择项目的根目录，注意一下是不是选择了 Stack 模块</li>
<li>然后一直下一步</li>
<li>配置下 configurations</li>
<li><code>&gt; add &gt; Haskell Stack Run &gt; Executable:  项目名称</code></li>
<li>Executable一定要填写</li>
</ol>
</li>
<li><p>点击 run 就能运行你的Haskell程序了！</p>
</li>
</ul>
<h3 id="相关工具"><a href="#相关工具" class="headerlink" title="相关工具"></a>相关工具</h3><p>如果仅仅只有这些虽然就能愉快的编码了，但是笔者认为是完全不够的。毕竟如果没有代码格式化工具和静态代码分析工具，笔者是不会写代码的。所以怎么能少了这些呢！！！<br>刚好 HaskForce 整合了 hlint, ghc-mod, hindente 等相关 Haskell 工具，可以很好地与 IntelliJ IDEA 结合。它们的安装也十分简单，可以直接使用 Haskell Stack 安装，当然 hlint 也可以使用 Homebrew 安装，不过笔者建议使用统一的安装方式方便将来管理。</p>
<p><code>stack install hlint hindente stylish-haskell</code></p>
<p>其中 ghc-mod 的安装值得特别说一下，目前新建的 Haskell Stack 工程默认的 resolver 是 lts-11.6 , 其 GHC 的版本号是 8.2.2 , 而 ghc-mod 的主工程由于<a href="https://github.com/DanielG/ghc-mod/issues/900" target="_blank" rel="noopener">技术问题</a>一直没有支持这套环境，所以想要成功编译出来是很麻烦的。所以如果大家想使用这款令人愉悦的黑客工作，可以按照下列步骤来编译。</p>
<pre><code>1. 推荐建立一个独立的目录来存储接下来要使用的文件，编译完成后即可删除
2. cd 你刚刚建的目录
3. git clone https://github.com/DanielG/ghc-mod.git -b ghc802
4. git clone https://github.com/DanielG/cabal-helper.git
5. cd ghc-mod ; touch stack.yaml
</code></pre><p>因为通过 Haskell Stack 来编译 ghc-mod 需要配置一个 stack.yaml , 所以用你最喜欢的编译器打开 stack.yaml 并写上下面的内容：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolver:</span> <span class="string">lts-11.6</span> <span class="comment"># current resolver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line"><span class="attr">- location:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">- location:</span> <span class="string">./core</span> <span class="comment"># seems like ghc-mod-core got integrated</span></span><br><span class="line"><span class="attr">- location:</span> <span class="string">../cabal-helper</span></span><br><span class="line"><span class="attr">  extra-dep:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">extra-deps:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">extra-1.6.6</span> <span class="comment"># escapeJSON was missing with 1.5.3</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">monad-journal-0.7.2</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">optparse-applicative-0.13.2.0</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">unix-compat-0.4.3.1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">either-4.4.1.1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cabal-plan-0.3.0.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">flags:</span> <span class="string">&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">extra-package-dbs:</span> <span class="string">[]</span></span><br><span class="line"></span><br><span class="line"><span class="attr">allow-newer:</span> <span class="literal">true</span> <span class="comment"># so it builds / too lazy to pinpoint exact versions</span></span><br></pre></td></tr></table></figure>
<p>现在在当前目录使用 <code>stack install</code> 命令即可正常编译出 ghc-mod 与 ghc-modi 并会被放在 <code>~/.local/bin</code> 目录下，你可以将这个目录加入 shell 的环境变量中也可以把它们移到已经加到 shell 的环境变量的目录下。</p>
<p>最后打开 IntelliJ IDEA 的进入偏好设置界面界面，找到 Haskell Tools 一栏，然后找到你想要使用的工具，点击 Auto Find 按钮然后确认，就能在 IntelliJ IDEA 使用这些工具了！<div style="text-align:center;color: #ccc;font-size:14px;"><br>    —— 本文结束 ——<br></div></p>
<p><center>本作品采用采用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="noopener">知识共享署名 4.0 国际许可协议</a>进行许可。</center><br><br></p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">donate</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/0x11901">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="http://127.0.0.1:43110/0x11901.bit/">ZeroNet</a></span>
        <span>/</span>
        
        <span><a href="https://juejin.im/user/5aeeff38f265da0b722b0600/posts">juejin.im</a></span>
        <span>/</span>
        
        <span><a href="https://www.jianshu.com/u/601e0f3e32a2">简书</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: 'Haskell在macOS下的环境搭建',
        owner: '0x11901',
        repo: 'Gitment',
        oauth: {
            client_id: 'a3599e4d81b2757fda08',
            client_secret: 'e99f88ebed2d14cd64648e8bbd0f2cb5631446d9',
        },
    })
    gitment.render('comment-container')
</script>

</html>
